{"openapi":"3.1.0","info":{"title":"NotebookLM Backend","description":"\n## NotebookLM Integration API\n\nA headless backend for integrating with Google NotebookLM.\n\n### Authentication\nThis server uses Google session cookies for authentication.\nUpload your `storage_state.json` at `/auth` to enable API access.\n\n### Error Format\nAll errors return:\n```json\n{\n    \"error\": {\n        \"code\": \"ERROR_CODE\",\n        \"message\": \"Human-readable message\",\n        \"details\": {}\n    }\n}\n```\n\n### Warning\n⚠️ **NOT FOR PUBLIC PRODUCTION USE**\n\nThis server has no API authentication. All endpoints are publicly accessible.\nOnly run on trusted networks or behind additional authentication layer.\n","version":"0.1.0"},"paths":{"/auth":{"get":{"tags":["auth"],"summary":"Auth Page","description":"Redirect to main admin panel.","operationId":"auth_page_auth_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/auth/upload":{"post":{"tags":["auth"],"summary":"Upload Storage State","description":"Upload storage_state.json and validate it.\nReturns JSON response for AJAX calls.","operationId":"upload_storage_state_auth_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_storage_state_auth_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/status":{"get":{"tags":["auth"],"summary":"Auth Status","description":"Check authentication status.\nReturns JSON with ok, message, and optionally notebook_count.","operationId":"auth_status_auth_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/logout":{"delete":{"tags":["auth"],"summary":"Logout","description":"Remove stored credentials.","operationId":"logout_auth_logout_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/notebooks":{"get":{"tags":["api"],"summary":"List Notebooks","description":"List all notebooks.","operationId":"list_notebooks_v1_notebooks_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"post":{"tags":["api"],"summary":"Create Notebook","description":"Create a new notebook.","operationId":"create_notebook_v1_notebooks_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateNotebookRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateNotebookResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/notebooks/{notebook_id}/sources/import":{"post":{"tags":["api"],"summary":"Import Sources","description":"Start async job to import sources into a notebook.\n\nSources can be:\n- MinIO: {\"type\": \"minio\", \"bucket\": \"raw\", \"key\": \"path/to/file.pdf\"}\n- URL: {\"type\": \"url\", \"url\": \"https://example.com/article\"}\n\nUse idempotency_key to prevent duplicate imports on retry.","operationId":"import_sources_v1_notebooks__notebook_id__sources_import_post","parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSourcesRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportSourcesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/notebooks/{notebook_id}/sources":{"get":{"tags":["api"],"summary":"List Sources","description":"List sources in a notebook.","operationId":"list_sources_v1_notebooks__notebook_id__sources_get","parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/notebooks/{notebook_id}/share":{"post":{"tags":["api"],"summary":"Share Notebook","description":"Share a notebook with specified emails.\n\nNOTE: May not be supported by current notebooklm-py version.","operationId":"share_notebook_v1_notebooks__notebook_id__share_post","parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShareRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShareResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/notebooks/{notebook_id}/chat":{"post":{"tags":["api"],"summary":"Chat With Notebook","description":"Ask a question to a notebook and get answer with references.","operationId":"chat_with_notebook_v1_notebooks__notebook_id__chat_post","parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/jobs/{job_id}":{"get":{"tags":["api"],"summary":"Get Job Status","description":"Get status of an import job.\n\nPoll this endpoint to track import progress.\nStatus values: queued, running, completed, failed","operationId":"get_job_status_v1_jobs__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/diagnostics/minio":{"get":{"tags":["api"],"summary":"Minio Diagnostics","description":"Check MinIO connectivity and list objects for a zone prefix.\n\nUse this to verify MinIO configuration before import.","operationId":"minio_diagnostics_v1_diagnostics_minio_get","parameters":[{"name":"zone_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zone Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MinioDiagnosticsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/chat":{"post":{"tags":["api"],"summary":"Worker Chat","description":"Chat endpoint for Cloudflare Worker / Lovable UI.\n\nRequires Bearer token authentication via NOTEBOOKLM_SERVICE_TOKEN.","operationId":"worker_chat_v1_chat_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerChatRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/health":{"get":{"tags":["api"],"summary":"Service Health","description":"Health check for service-to-service authentication.\n\nReturns NotebookLM authentication status and notebook count.","operationId":"service_health_v1_health_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceHealthResponseV2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/git/commit":{"post":{"tags":["api"],"summary":"Git Commit","description":"Commit a file to GitHub repository.\nCalled by Cloudflare Worker after accepting a proposal.","operationId":"git_commit_v1_git_commit_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GitCommitRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GitCommitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/api/github/config":{"post":{"tags":["api"],"summary":"Save Github Config","description":"Save GitHub configuration (token stored in env/secrets). Requires service token.","operationId":"save_github_config_v1_api_github_config_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GitHubConfigRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/api/github/status":{"get":{"tags":["api"],"summary":"Get Github Status","description":"Check if GitHub is configured. Requires service token.","operationId":"get_github_status_v1_api_github_status_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GitHubStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.\n\nReturns server status and authentication state.\nAlways returns 200 OK even if not authenticated.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/debug/minio":{"get":{"summary":"Debug Minio","description":"Debug endpoint for MinIO connection diagnostics.\n\nReturns connection status and masked configuration.\nNever exposes full secrets.","operationId":"debug_minio_debug_minio_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint - serves admin panel.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/github/config":{"post":{"summary":"Save Github Config Public","description":"Save GitHub configuration from web UI (no auth required for admin panel).","operationId":"save_github_config_public_api_github_config_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/github/status":{"get":{"summary":"Get Github Status Public","description":"Check if GitHub is configured (for web UI).","operationId":"get_github_status_public_api_github_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/info":{"get":{"summary":"Api Info","description":"API info endpoint - returns JSON status.","operationId":"api_info_api_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_upload_storage_state_auth_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_storage_state_auth_upload_post"},"ChatRequest":{"properties":{"question":{"type":"string","minLength":1,"title":"Question"},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"},"show_sources":{"type":"boolean","title":"Show Sources","default":true}},"type":"object","required":["question"],"title":"ChatRequest"},"ChatResponse":{"properties":{"answer":{"type":"string","title":"Answer"},"references":{"items":{"$ref":"#/components/schemas/ReferenceResponse"},"type":"array","title":"References"}},"type":"object","required":["answer","references"],"title":"ChatResponse"},"CreateNotebookRequest":{"properties":{"title":{"type":"string","maxLength":200,"minLength":1,"title":"Title"}},"type":"object","required":["title"],"title":"CreateNotebookRequest"},"CreateNotebookResponse":{"properties":{"notebook_id":{"type":"string","title":"Notebook Id"},"notebook_url":{"type":"string","title":"Notebook Url"},"title":{"type":"string","title":"Title"}},"type":"object","required":["notebook_id","notebook_url","title"],"title":"CreateNotebookResponse"},"GitCommitRequest":{"properties":{"path":{"type":"string","minLength":1,"title":"Path","description":"File path in repo"},"content":{"type":"string","title":"Content","description":"File content"},"message":{"type":"string","title":"Message","description":"Commit message","default":"Update note via proposal"},"authorName":{"type":"string","title":"Authorname","description":"Git author name","default":"Garden Guest"},"proposalId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Proposalid","description":"Proposal ID for tracking"}},"type":"object","required":["path","content"],"title":"GitCommitRequest"},"GitCommitResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"sha":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sha"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"hint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hint"}},"type":"object","required":["success"],"title":"GitCommitResponse"},"GitHubConfigRequest":{"properties":{"token":{"type":"string","minLength":1,"title":"Token"},"repo":{"type":"string","minLength":1,"title":"Repo"},"branch":{"type":"string","title":"Branch","default":"main"}},"type":"object","required":["token","repo"],"title":"GitHubConfigRequest"},"GitHubStatusResponse":{"properties":{"configured":{"type":"boolean","title":"Configured"},"repo":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Repo"},"branch":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Branch"},"valid":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Valid"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["configured"],"title":"GitHubStatusResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoryMessage":{"properties":{"role":{"type":"string","enum":["user","assistant"],"title":"Role"},"content":{"type":"string","title":"Content"}},"type":"object","required":["role","content"],"title":"HistoryMessage"},"ImportSourcesRequest":{"properties":{"sources":{"items":{"$ref":"#/components/schemas/SourceSpec"},"type":"array","minItems":1,"title":"Sources"},"idempotency_key":{"anyOf":[{"type":"string","maxLength":128},{"type":"null"}],"title":"Idempotency Key","description":"Optional key for idempotent requests. Same key returns existing job."}},"type":"object","required":["sources"],"title":"ImportSourcesRequest"},"ImportSourcesResponse":{"properties":{"job_id":{"type":"string","title":"Job Id"},"status":{"type":"string","title":"Status"},"notebook_url":{"type":"string","title":"Notebook Url"}},"type":"object","required":["job_id","status","notebook_url"],"title":"ImportSourcesResponse"},"JobResponse":{"properties":{"job_id":{"type":"string","title":"Job Id"},"status":{"type":"string","title":"Status"},"progress":{"type":"integer","title":"Progress"},"current_step":{"type":"integer","title":"Current Step"},"total_steps":{"type":"integer","title":"Total Steps"},"notebook_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notebook Url"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"results":{"anyOf":[{"items":{"$ref":"#/components/schemas/SourceResultResponse"},"type":"array"},{"type":"null"}],"title":"Results"}},"type":"object","required":["job_id","status","progress","current_step","total_steps"],"title":"JobResponse"},"MinioDiagnosticsResponse":{"properties":{"minio_ok":{"type":"boolean","title":"Minio Ok"},"endpoint":{"type":"string","title":"Endpoint"},"secure":{"type":"boolean","title":"Secure"},"bucket":{"type":"string","title":"Bucket"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"test_prefix":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Test Prefix"},"objects_found":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Objects Found"}},"type":"object","required":["minio_ok","endpoint","secure","bucket"],"title":"MinioDiagnosticsResponse"},"ReferenceResponse":{"properties":{"citation_number":{"type":"integer","title":"Citation Number"},"source_title":{"type":"string","title":"Source Title"},"cited_text":{"type":"string","title":"Cited Text"}},"type":"object","required":["citation_number","source_title","cited_text"],"title":"ReferenceResponse"},"ServiceHealthResponseV2":{"properties":{"authenticated":{"type":"boolean","title":"Authenticated"},"message":{"type":"string","title":"Message"},"notebook_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Notebook Count"},"services":{"additionalProperties":true,"type":"object","title":"Services","default":{}}},"type":"object","required":["authenticated","message"],"title":"ServiceHealthResponseV2"},"ShareRequest":{"properties":{"emails":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Emails"},"role":{"type":"string","title":"Role","description":"Role: 'reader' or 'writer'","default":"reader"}},"type":"object","required":["emails"],"title":"ShareRequest"},"ShareResponse":{"properties":{"ok":{"type":"boolean","title":"Ok"},"shared_with":{"items":{"type":"string"},"type":"array","title":"Shared With"},"role":{"type":"string","title":"Role"}},"type":"object","required":["ok","shared_with","role"],"title":"ShareResponse"},"SourceResultResponse":{"properties":{"source":{"additionalProperties":true,"type":"object","title":"Source"},"status":{"type":"string","title":"Status"},"source_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Id"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"},"error_details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Error Details"},"retries":{"type":"integer","title":"Retries","default":0}},"type":"object","required":["source","status"],"title":"SourceResultResponse"},"SourceSpec":{"properties":{"type":{"type":"string","title":"Type","description":"Source type: 'minio' or 'url'"},"bucket":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bucket","description":"MinIO bucket (for type='minio')"},"key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Key","description":"MinIO object key (for type='minio')"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url","description":"URL (for type='url')"}},"type":"object","required":["type"],"title":"SourceSpec"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WorkerChatRequest":{"properties":{"notebookUrl":{"type":"string","title":"Notebookurl","description":"NotebookLM URL with notebook ID"},"message":{"type":"string","minLength":1,"title":"Message","description":"User's question"},"kind":{"type":"string","enum":["answer","summary","study_guide","flashcards"],"title":"Kind","description":"Type of response to generate","default":"answer"},"history":{"items":{"$ref":"#/components/schemas/HistoryMessage"},"type":"array","title":"History","description":"Conversation history (max 12 messages)"}},"type":"object","required":["notebookUrl","message"],"title":"WorkerChatRequest"},"WorkerChatResponse":{"properties":{"answer":{"type":"string","title":"Answer"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"}},"type":"object","required":["answer"],"title":"WorkerChatResponse"}}}}