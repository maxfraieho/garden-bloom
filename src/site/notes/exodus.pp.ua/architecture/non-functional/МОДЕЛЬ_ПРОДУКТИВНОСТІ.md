---
{"tags":["domain:arch","status:canonical","format:spec","feature:execution"],"created":"2026-02-22","updated":"2026-02-22","tier":1,"title":"МОДЕЛЬ ПРОДУКТИВНОСТІ","dg-publish":true,"dg-metatags":null,"dg-home":null,"permalink":"/exodus.pp.ua/architecture/non-functional/МОДЕЛЬ_ПРОДУКТИВНОСТІ/","dgPassFrontmatter":true,"noteIcon":""}
---


# МОДЕЛЬ_ПРОДУКТИВНОСТІ

> Створено: 2026-02-22
> Автор: Головний архітектор системи
> Статус: Канонічна специфікація
> Мова: Українська (канонічна)

---

## КОНТЕКСТ

Garden Bloom є execution platform для AI-агентів з Human-in-the-loop моделлю. Продуктивність системи визначається не лише швидкістю відповіді — вона вимірюється у термінах **корисного виконання per token витрат**. Оскільки кожен run використовує LLM та зовнішні сервіси (NotebookLM), бюджет продуктивності є ключовим проєктувальним обмеженням.

---

## ПРОБЛЕМА

Відсутність explicit performance contract призводить до:
- Невизначених очікувань від Owner щодо часу виконання агентів
- Відсутності сигналів для Orchestration Layer щодо timeout порогів
- Немає basis для capacity planning при збільшенні кількості агентів

---

## РІШЕННЯ

### Цільові характеристики (SLO)

| Метрика | Ціль | Критичний поріг | Де вимірюється |
|---------|------|-----------------|----------------|
| **Run latency (p50)** | ≤ 45 сек | > 120 сек | MinIO `runs/{id}/status.json` |
| **Run latency (p95)** | ≤ 90 сек | > 300 сек | MinIO audit log |
| **Gateway response** | ≤ 500 мс | > 2 сек | Cloudflare Analytics |
| **Proposal apply latency** | ≤ 3 сек | > 15 сек | Worker runtime |
| **Agent load time** | ≤ 2 сек | > 5 сек | Hatchet step log |
| **Frontend poll interval** | 3–5 сек | — | Frontend config |

### Бюджет виконання одного run

```
Фаза 1: Context Load (Hatchet wrapper)
  - MinIO: завантаження _agent.md + sources     ≤ 2 сек
  - git monorepo: завантаження Layer 1 memory   ≤ 1 сек
  Разом: ≤ 3 сек

Фаза 2: Agent Runtime (Mastra + LLM)
  - LLM inference (1–3 calls)                   ≤ 30 сек
  - NotebookLM query (якщо викликається)         ≤ 15 сек
  - Tool calls (read-context, read-memory)        ≤ 5 сек
  Разом: ≤ 50 сек

Фаза 3: Proposal Write (Hatchet wrapper)
  - MinIO write proposals                        ≤ 1 сек
  - memory-update POST                           ≤ 1 сек
  Разом: ≤ 2 сек

Фаза 4: Finalize
  - manifest.json write                          ≤ 1 сек
  Разом: ≤ 1 сек

Загальний бюджет run: ≤ 56 сек (p50)
```

### Timeout контракти (Orchestration Layer)

**[ІНВАРІАНТ]** Orchestration Layer реалізує наступні тайм-аути:

| Рівень | Тайм-аут | Наслідок |
|--------|----------|----------|
| Per step | 120 сек | Step → failed, run → error |
| Per run | 600 сек | Run → timeout |
| NLM tool call | 45 сек | Tool error → agent retry |
| MinIO operation | 10 сек | Retry з backoff |

### Token бюджет

| Компонент | Ліміт | Обґрунтування |
|-----------|-------|---------------|
| _agent.md + pseudocode | ≤ 4 000 токенів | Ефективність context window |
| Memory Layer 1 | ≤ 12 000 токенів | HARD limit (A7) |
| Sources per run | ≤ 20 000 токенів | Grounded reasoning bounding |
| LLM output per run | ≤ 8 000 токенів | Cost control |

---

## ІНВАРІАНТИ

**PERF-INV-001:** Маstra не тримає context між runs → кожен run має повний context load.

**PERF-INV-002:** Memory Layer 1 (≤ 12 000 токенів) завантажується автоматично при кожному run. Перевищення ліміту → eviction (відповідно до [[exodus.pp.ua/architecture/features/ПАМ_ЯТЬ_АГЕНТА_GIT_DIFFMEM_V1\|ПАМ_ЯТЬ_АГЕНТА_GIT_DIFFMEM_V1]]).

**PERF-INV-003:** NotebookLM є single-threaded cognitive proxy. Паралельні запити до NLM від одного агента заборонені.

**PERF-INV-004:** Frontend polling interval не може бути менше 3 сек (захист від DDoS власного сервісу).

---

## ЗВ'ЯЗКИ

**Цей документ залежить від:**
- [[exodus.pp.ua/architecture/foundation/АРХІТЕКТУРНИЙ_КОРІНЬ\|АРХІТЕКТУРНИЙ_КОРІНЬ]] — A3 (stateless runtime), A4 (replaceable orchestration), A7 (bounded memory)
- [[exodus.pp.ua/architecture/core/КАНОНІЧНА_АРХІТЕКТУРА_ВИКОНАННЯ\|КАНОНІЧНА_АРХІТЕКТУРА_ВИКОНАННЯ]] — timeout values, step structure
- [[exodus.pp.ua/architecture/features/ПАМ_ЯТЬ_АГЕНТА_GIT_DIFFMEM_V1\|ПАМ_ЯТЬ_АГЕНТА_GIT_DIFFMEM_V1]] — HARD limits Layer 1/2

**Цей документ впливає на:**
- [[exodus.pp.ua/architecture/core/АБСТРАКЦІЯ_РІВНЯ_ОРКЕСТРАЦІЇ\|АБСТРАКЦІЯ_РІВНЯ_ОРКЕСТРАЦІЇ]] — конкретні timeout значення для Hatchet adapter
- [[exodus.pp.ua/architecture/core/КОНТРАКТ_АГЕНТА_V1\|КОНТРАКТ_АГЕНТА_V1]] — token budget обмеження для _agent.md

---

*Цей документ встановлює performance contract для runtime-компонентів Garden Bloom.*
